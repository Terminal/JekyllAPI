{
  "content": "<p>As your bot application grows, you want to expose your bot to as many bot list and application\nwebsites as you can.</p>\n\n<p>However, finding the correct endpoint for other bot lists are a hassle.<br />\nBotBlock aims to solve this by providing a single POST endpoint to update your counts to all bot\nlists all at once.</p>\n\n<h2 id=\"setup\">Setup</h2>\n<p>You will need your <code class=\"highlighter-rouge\">Discord Apps Marketplace Token</code>, found by clicking the <code class=\"highlighter-rouge\">Configure</code> button under your bot page.</p>\n\n<p><img src=\"/assets/img/docs/20190417-botblock/configure.png\" alt=\"Configure\" /></p>\n\n<h2 id=\"discordjs-and-eris\">Discord.js and Eris</h2>\n<p>You will need to install <code class=\"highlighter-rouge\">node-fetch</code> to POST your count to the proprietary API</p>\n\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>npm install <span class=\"nt\">--save</span> node-fetch\n</code></pre></div></div>\n<p>or</p>\n<div class=\"language-bash highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code>yarn add node-fetch\n</code></pre></div></div>\n\n<div class=\"language-js highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><code><span class=\"kd\">const</span> <span class=\"nx\">fetch</span> <span class=\"o\">=</span> <span class=\"nx\">require</span><span class=\"p\">(</span><span class=\"s1\">'node-fetch'</span><span class=\"p\">);</span>\n\n<span class=\"kd\">const</span> <span class=\"nx\">updateGuildCounts</span> <span class=\"o\">=</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"s1\">'Posting bot counts'</span><span class=\"p\">);</span>\n  <span class=\"nx\">fetch</span><span class=\"p\">(</span><span class=\"s1\">'https://botblock.org/api/count'</span><span class=\"p\">,</span> <span class=\"p\">{</span>\n    <span class=\"na\">method</span><span class=\"p\">:</span> <span class=\"s1\">'POST'</span><span class=\"p\">,</span>\n    <span class=\"na\">headers</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n      <span class=\"s1\">'Content-Type'</span><span class=\"p\">:</span> <span class=\"s1\">'application/json'</span>\n    <span class=\"p\">},</span>\n    <span class=\"na\">body</span><span class=\"p\">:</span> <span class=\"nx\">JSON</span><span class=\"p\">.</span><span class=\"nx\">stringify</span><span class=\"p\">({</span>\n      <span class=\"s1\">'server_count'</span><span class=\"p\">:</span> <span class=\"nx\">client</span><span class=\"p\">.</span><span class=\"nx\">guilds</span><span class=\"p\">.</span><span class=\"nx\">length</span><span class=\"p\">,</span>\n      <span class=\"s1\">'bot_id'</span><span class=\"p\">:</span> <span class=\"nx\">client</span><span class=\"p\">.</span><span class=\"nx\">user</span><span class=\"p\">.</span><span class=\"nx\">id</span><span class=\"p\">,</span>\n      <span class=\"s1\">'discordapps.dev'</span><span class=\"p\">:</span> <span class=\"s1\">'// THE TOKEN FROM THE CONFIGURE PAGE //'</span><span class=\"p\">,</span>\n    <span class=\"p\">})</span>\n  <span class=\"p\">})</span>\n    <span class=\"p\">.</span><span class=\"nx\">then</span><span class=\"p\">(</span><span class=\"nx\">res</span> <span class=\"o\">=&gt;</span> <span class=\"nx\">res</span><span class=\"p\">.</span><span class=\"nx\">json</span><span class=\"p\">())</span>\n    <span class=\"p\">.</span><span class=\"nx\">then</span><span class=\"p\">(({</span><span class=\"nx\">success</span><span class=\"p\">,</span> <span class=\"nx\">failure</span><span class=\"p\">})</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n      <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"s1\">'Success: '</span> <span class=\"o\">+</span> <span class=\"nb\">Object</span><span class=\"p\">.</span><span class=\"nx\">keys</span><span class=\"p\">(</span><span class=\"nx\">success</span><span class=\"p\">).</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"s1\">', '</span><span class=\"p\">));</span>\n      <span class=\"nx\">console</span><span class=\"p\">.</span><span class=\"nx\">log</span><span class=\"p\">(</span><span class=\"s1\">'Failure: '</span> <span class=\"o\">+</span> <span class=\"nb\">Object</span><span class=\"p\">.</span><span class=\"nx\">keys</span><span class=\"p\">(</span><span class=\"nx\">failure</span><span class=\"p\">).</span><span class=\"nx\">join</span><span class=\"p\">(</span><span class=\"s1\">', '</span><span class=\"p\">));</span>\n    <span class=\"p\">});</span>\n<span class=\"p\">};</span>\n\n<span class=\"nx\">client</span><span class=\"p\">.</span><span class=\"nx\">once</span><span class=\"p\">(</span><span class=\"s1\">'ready'</span><span class=\"p\">,</span> <span class=\"p\">()</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">updateGuildCounts</span><span class=\"p\">();</span>\n  <span class=\"nx\">setInterval</span><span class=\"p\">(</span><span class=\"nx\">updateGuildCounts</span><span class=\"p\">,</span> <span class=\"mf\">1.8e6</span><span class=\"p\">);</span> <span class=\"c1\">// Every 30 minutes</span>\n<span class=\"p\">});</span>\n</code></pre></div></div>\n\n<h2 id=\"other-languages\">Other Languages</h2>\n<p>The community has made free and open source libraries to help you post counts to the proprietary\nservice. <a href=\"https://botblock.org/api/docs\">You can find them, and other bot lists at the BotBlock.org documentation</a></p>\n",
  "title": "How to use the BotBlock proprietary software to post bot counts to discordapps.dev",
  "by": "7coil",
  "permalink": "/posts/docs/20190417-botblock/",
  "date": "2019-04-17T00:00:00+01:00",
  "description": "Learn how to use the BotBlock proprietary API to send your bot's server counts to discordapps.dev, as well as other third party bot list service providers"
}
